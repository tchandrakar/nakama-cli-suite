# Step 002: Auth Layer

## Status: NOT STARTED

| Task | Status | Date | Notes |
|------|--------|------|-------|
| Add oauth2, reqwest, nakama-vault dependencies | - | - | - |
| Implement OAuth2 + PKCE flow for Google | - | - | - |
| Configure scopes (generative-language, custom search) | - | - | - |
| Implement localhost redirect callback server | - | - | - |
| Implement token storage via nakama-vault | - | - | - |
| Implement auto-refresh for expired tokens | - | - | - |
| Handle refresh token revocation (prompt re-auth) | - | - | - |
| Implement API key fallback (GEMINI_API_KEY env var) | - | - | - |
| Implement scope management and tracking | - | - | - |
| Implement `auth login` subcommand (OAuth2 + API key modes) | - | - | - |
| Implement `auth status` subcommand | - | - | - |
| Implement `auth logout` subcommand | - | - | - |
| Implement `auth refresh` subcommand | - | - | - |
| Unit tests for token management and refresh logic | - | - | - |
| Integration tests for OAuth2 flow with mocked endpoints | - | - | - |

Status legend: `-` Not started | `WIP` In progress | `DONE` Complete | `BLOCKED` Blocked

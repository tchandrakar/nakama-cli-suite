# Step 008: Intelligence Layer

## Status: NOT STARTED

| Task | Status | Date | Notes |
|------|--------|------|-------|
| Add lancedb dependency | - | - | - |
| Implement Confluence embedding cache (chunk and embed pages) | - | - | - |
| Store embeddings in LanceDB at ~/.itachi/embeddings/ | - | - | - |
| Implement incremental indexing (detect changed pages) | - | - | - |
| Handle deleted pages (remove from index) | - | - | - |
| Implement semantic search with vector similarity | - | - | - |
| Support filtering by space, label, date range | - | - | - |
| Implement hybrid search (semantic + keyword CQL) | - | - | - |
| Implement context builder (assemble LLM context within token budget) | - | - | - |
| Prioritize context by relevance to question | - | - | - |
| Implement LLM synthesizer with source attribution | - | - | - |
| Generate Jira links and Confluence links in answers | - | - | - |
| Implement `index status`, `index rebuild`, `index update` subcommands | - | - | - |
| Display indexing progress with nakama-ui | - | - | - |
| Unit tests for chunking and context building | - | - | - |
| Integration tests for embedding pipeline | - | - | - |

Status legend: `-` Not started | `WIP` In progress | `DONE` Complete | `BLOCKED` Blocked

# Step 007: Security Integration

## Status: NOT STARTED

| Task | Status | Date | Notes |
|------|--------|------|-------|
| Integrate nakama-vault for embedding API key retrieval | - | - | - |
| Integrate nakama-vault for LLM API key retrieval | - | - | - |
| Support key rotation on auth failures | - | - | - |
| Implement .senku/ directory permissions (0700) | - | - | - |
| Validate permissions on startup | - | - | - |
| Implement file locking for concurrent indexing prevention | - | - | - |
| Detect and skip sensitive files (.env, credentials, private keys) | - | - | - |
| Configurable sensitive file patterns | - | - | - |
| Wire up nakama-audit for index/query/graph/onboard/map operations | - | - | - |
| Add audit context (project, user, session, version) | - | - | - |
| Ensure no source code in audit logs | - | - | - |
| Implement data retention policy and purge command | - | - | - |
| Tests for vault integration | - | - | - |
| Tests for permission enforcement | - | - | - |
| Tests for sensitive file detection | - | - | - |
| Tests for audit event emission | - | - | - |

Status legend: `-` Not started | `WIP` In progress | `DONE` Complete | `BLOCKED` Blocked
